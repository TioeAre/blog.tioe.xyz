<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='åˆ©ç”¨caddy v2 &#43; webhook &#43; hugoæ­å»ºåšå®¢, å¹¶é…ç½®bitwardenä¸v2rayæœåŠ¡'>
<meta name="keywords" content="caddy, webhook, hugo, v2ray, bitwarden"><title>æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢</title>

<link rel='canonical' href='https://www.blog.tioe.xyz/daily/2023.03.16/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢'>
<meta property='og:description' content='åˆ©ç”¨caddy v2 &#43; webhook &#43; hugoæ­å»ºåšå®¢, å¹¶é…ç½®bitwardenä¸v2rayæœåŠ¡'>
<meta property='og:url' content='https://www.blog.tioe.xyz/daily/2023.03.16/'>
<meta property='og:site_name' content='TioeAre'>
<meta property='og:type' content='article'><meta property='article:section' content='Daily' /><meta property='article:tag' content='caddy' /><meta property='article:tag' content='webhook' /><meta property='article:tag' content='hugo' /><meta property='article:tag' content='v2ray' /><meta property='article:tag' content='bitwarden' /><meta property='article:published_time' content='2023-03-16T02:02:45&#43;08:00'/><meta property='article:modified_time' content='2023-03-16T02:02:45&#43;08:00'/><meta property='og:image' content='https://raw.githubusercontent.com/TioeAre/imageHost/main/pictures/84738802_p0_master1200.jpg' />
<meta name="twitter:title" content="æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢">
<meta name="twitter:description" content="åˆ©ç”¨caddy v2 &#43; webhook &#43; hugoæ­å»ºåšå®¢, å¹¶é…ç½®bitwardenä¸v2rayæœåŠ¡"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://raw.githubusercontent.com/TioeAre/imageHost/main/pictures/84738802_p0_master1200.jpg' />
    <link rel="shortcut icon" href="/favicon.png" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8Z7Z9EX371"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-8Z7Z9EX371', { 'anonymize_ip': false });
}
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu59d45283e55c90c93de2408cb8730bfd_124382_300x0_resize_box_3.png" width="300"
                            height="275" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">TioeAre</a></h1>
            <h2 class="site-description">æ´—å¿ƒé©é¢ï¼Œæ½œå¿ƒå­¦ä¹ </h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/359367522'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="800px"
   height="800px"
   viewBox="0 0 24 24"
   version="1.1"
   id="svg22"
   sodipodi:docname="bilibili.svg"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)">
  <metadata
     id="metadata28">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs26" />
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="640"
     inkscape:window-height="480"
     id="namedview24"
     showgrid="false"
     inkscape:zoom="0.295"
     inkscape:cx="400"
     inkscape:cy="400"
     inkscape:window-x="712"
     inkscape:window-y="273"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg22" />
  <g
     id="g20"
     transform="matrix(1.0974577,0,0,1.1186441,-1.1186441,-1.4237288)">
    <path
       d="M 0,0 H 24 V 24 H 0 Z"
       id="path16"
       inkscape:connector-curvature="0"
       style="fill:none" />
    <path
       d="m 18.223,3.086 a 1.25,1.25 0 0 1 0,1.768 L 17.08,5.996 h 1.17 A 3.75,3.75 0 0 1 22,9.747 v 7.5 a 3.75,3.75 0 0 1 -3.75,3.75 H 5.75 A 3.75,3.75 0 0 1 2,17.247 v -7.5 A 3.75,3.75 0 0 1 5.75,5.997 H 6.916 L 5.775,4.855 A 1.25,1.25 0 1 1 7.542,3.087 l 2.652,2.652 c 0.079,0.079 0.145,0.165 0.198,0.257 h 3.213 c 0.053,-0.092 0.12,-0.18 0.199,-0.258 l 2.651,-2.652 a 1.25,1.25 0 0 1 1.768,0 z m 0.027,5.42 H 5.75 A 1.25,1.25 0 0 0 4.503,9.663 L 4.5,9.757 v 7.5 c 0,0.659 0.51,1.199 1.157,1.246 l 0.093,0.004 h 12.5 A 1.25,1.25 0 0 0 19.497,17.35 L 19.5,17.257 v -7.5 c 0,-0.69 -0.56,-1.25 -1.25,-1.25 z m -10,2.5 c 0.69,0 1.25,0.56 1.25,1.25 v 1.25 a 1.25,1.25 0 1 1 -2.5,0 v -1.25 c 0,-0.69 0.56,-1.25 1.25,-1.25 z m 7.5,0 c 0.69,0 1.25,0.56 1.25,1.25 v 1.25 a 1.25,1.25 0 1 1 -2.5,0 v -1.25 c 0,-0.69 0.56,-1.25 1.25,-1.25 z"
       id="path18"
       inkscape:connector-curvature="0" />
  </g>
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/TioeAre'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/study/' >
                
                
                
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="24"
   height="24"
   stroke-linejoin="round"
   stroke-linecap="round"
   fill="none"
   stroke="#2c3e50"
   stroke-width="1.5"
   class="icon icon-tabler icon-tabler-notebook"
   version="1.1"
   id="svg10"
   sodipodi:docname="notebook.svg"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)">
  <metadata
     id="metadata16">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs14" />
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="640"
     inkscape:window-height="480"
     id="namedview12"
     showgrid="false"
     inkscape:zoom="9.8333333"
     inkscape:cx="12"
     inkscape:cy="13.424887"
     inkscape:window-x="532"
     inkscape:window-y="380"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg10" />
  <g
     id="g8"
     transform="translate(-3.0729831,-2.7496101)">
    <title
       id="title2">Layer 1</title>
    <path
       id="svg_1"
       d="M 0,0 H 24 V 24 H 0 Z"
       inkscape:connector-curvature="0"
       style="fill:none" />
    <path
       id="svg_2"
       d="m 6,4 h 11 a 2,2 0 0 1 2,2 v 12 a 2,2 0 0 1 -2,2 H 6 A 1,1 0 0 1 5,19 V 5 A 1,1 0 0 1 6,4 m 3,0 v 18"
       inkscape:connector-curvature="0" />
    <line
       id="svg_3"
       y2="8"
       x2="15"
       y1="8"
       x1="13" />
    <line
       id="svg_4"
       y2="12"
       x2="15"
       y1="12"
       x1="13" />
  </g>
</svg>

                
                <span>å­¦ä¹ ç¬”è®°</span>
            </a>
        </li>
        
        
        <li >
            <a href='/project/' >
                
                
                
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="24"
   height="24"
   stroke-linejoin="round"
   stroke-linecap="round"
   fill="none"
   stroke="#2c3e50"
   stroke-width="1.5"
   class="icon icon-tabler icon-tabler-file-code"
   version="1.1"
   id="svg11"
   sodipodi:docname="file-code.svg"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)">
  <metadata
     id="metadata17">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs15" />
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="640"
     inkscape:window-height="480"
     id="namedview13"
     showgrid="false"
     inkscape:zoom="9.8333333"
     inkscape:cx="12"
     inkscape:cy="12"
     inkscape:window-x="0"
     inkscape:window-y="35"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg11" />
  <g
     id="g9"
     transform="matrix(0.9166574,0,0,0.91195382,-0.79700322,-0.77403561)">
    <title
       id="title2">Layer 1</title>
    <path
       id="svg_1"
       d="M 0,0 H 24 V 24 H 0 Z"
       inkscape:connector-curvature="0"
       style="fill:none" />
    <path
       id="svg_2"
       d="m 14,3 v 4 a 1,1 0 0 0 1,1 h 4"
       inkscape:connector-curvature="0" />
    <path
       id="svg_3"
       d="M 17,21 H 7 A 2,2 0 0 1 5,19 V 5 A 2,2 0 0 1 7,3 h 7 l 5,5 v 11 a 2,2 0 0 1 -2,2 z"
       inkscape:connector-curvature="0" />
    <path
       id="svg_4"
       d="m 10,13 -1,2 1,2"
       inkscape:connector-curvature="0" />
    <path
       id="svg_5"
       d="m 14,13 1,2 -1,2"
       inkscape:connector-curvature="0" />
  </g>
</svg>

                
                <span>é¡¹ç›®è®°å½•</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://www.blog.tioe.xyz/en/" >English</option>
                        
                            <option value="https://www.blog.tioe.xyz/" selected>ä¸­æ–‡</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#é¡¹ç›®æ¦‚è¿°">é¡¹ç›®æ¦‚è¿°</a>
      <ol>
        <li><a href="#ç‰ˆæœ¬è¯´æ˜">ç‰ˆæœ¬è¯´æ˜</a>
          <ol>
            <li><a href="#caddy">caddy</a></li>
            <li><a href="#bitwarden"><code>bitwarden</code></a></li>
            <li><a href="#hugo"><code>hugo</code></a></li>
          </ol>
        </li>
        <li><a href="#æ ¼å¼è¯´æ˜">æ ¼å¼è¯´æ˜</a></li>
      </ol>
    </li>
    <li><a href="#å®‰è£…">å®‰è£…</a>
      <ol>
        <li><a href="#caddy-1">caddy</a>
          <ol>
            <li><a href="#aptå®‰è£…caddy">aptå®‰è£…caddy</a></li>
            <li><a href="#goç¯å¢ƒ">goç¯å¢ƒ</a></li>
            <li><a href="#xcaddy">xcaddy</a></li>
          </ol>
        </li>
        <li><a href="#hugo-1">hugo</a></li>
        <li><a href="#vaultwarden_setup">vaultwarden</a></li>
      </ol>
    </li>
    <li><a href="#é…ç½®">é…ç½®</a>
      <ol>
        <li><a href="#caddy-2">caddy</a>
          <ol>
            <li><a href="#caddyservice">caddy.service</a></li>
            <li><a href="#caddyfilejson">caddyfile.json</a></li>
          </ol>
        </li>
        <li><a href="#v2ray">v2ray</a>
          <ol>
            <li><a href="#configjson">config.json</a></li>
          </ol>
        </li>
        <li><a href="#hugo-2">hugo</a></li>
        <li><a href="#vaultwardenvaultwarden_setup"><a href="#vaultwarden_setup">vaultwarden</a></a></li>
        <li><a href="#ç¼–å†™è„šæœ¬ç›‘è§†gitæ´»åŠ¨å¹¶æ›´æ–°ç½‘é¡µ">ç¼–å†™è„šæœ¬ç›‘è§†gitæ´»åŠ¨å¹¶æ›´æ–°ç½‘é¡µ</a></li>
      </ol>
    </li>
    <li><a href="#ä¸ºç½‘ç«™ç”³è¯·è¯ä¹¦-ä»¥cloudflareä¸ºä¾‹">ä¸ºç½‘ç«™ç”³è¯·è¯ä¹¦ (ä»¥cloudflareä¸ºä¾‹)</a></li>
    <li><a href="#å¸¸ç”¨å‘½ä»¤è¡¨">å¸¸ç”¨å‘½ä»¤è¡¨</a></li>
    <li><a href="#å…¶ä»–">å…¶ä»–</a></li>
    <li><a href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a>
      <ol>
        <li><a href="#caddy-3"><code>caddy</code>:</a></li>
        <li><a href="#vaultwarden"><code>vaultwarden</code>:</a></li>
        <li><a href="#hugo-3"><code>hugo</code>:</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/daily/2023.03.16/">
                
                    <img src="https://raw.githubusercontent.com/TioeAre/imageHost/main/pictures/84738802_p0_master1200.jpg" loading="lazy" alt="Featured image of post æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="background-color: #2a9d8f; color: #fff;">
                æœåŠ¡å™¨
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/daily/2023.03.16/">æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            åˆ©ç”¨caddy v2 &#43; webhook &#43; hugoæ­å»ºåšå®¢, å¹¶é…ç½®bitwardenä¸v2rayæœåŠ¡
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 16, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 13 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="caddy-v2-webhook-hugoæ­å»ºåšå®¢å¹¶é…ç½®bitwardenä¸v2ray">Caddy v2, webhook, hugoæ­å»ºåšå®¢å¹¶é…ç½®bitwardenä¸v2ray</h1>
<h2 id="é¡¹ç›®æ¦‚è¿°">é¡¹ç›®æ¦‚è¿°</h2>
<h3 id="ç‰ˆæœ¬è¯´æ˜">ç‰ˆæœ¬è¯´æ˜</h3>
<h4 id="caddy">caddy</h4>
<p>ä¹‹å‰æˆ‘çš„æœåŠ¡å™¨(<code>amd64</code>, <code>debain10</code>)ä¸Šä¸€ç›´ç”¨çš„æ˜¯<code>caddy 1.x</code>ç‰ˆæœ¬, ç›®å‰å®˜æ–¹ä¸ºäº†æ¨å¹¿2.0ç‰ˆæœ¬, å·²ç»ç»æƒ…çš„å°†v1ç‰ˆæœ¬çš„å®˜æ–¹ä¸‹è½½æ¸ é“, æ’ä»¶å®‰è£…è„šæœ¬ä»¥åŠæ–‡æ¡£ç­‰å…¨éƒ½åˆ æ‰äº†ğŸ™ƒ, å¯¼è‡´æˆ‘æœ€å¼€å§‹çœ‹çš„å…³äºv1ç‰ˆæ­å»ºåšå®¢çš„æ•™ç¨‹å…¨éƒ½ç”¨ä¸äº†. å¹¶ä¸”ç”±äºv1ç‰ˆå·²ç»å‘å¸ƒå¾ˆå¤šå¹´äº†, è€Œv2åœ¨2020å¹´æ‰å‘å¸ƒ. ç½‘ä¸Šç»å¤§éƒ¨åˆ†æ•™ç¨‹ä»¥åŠ<code>git</code>, <code>webhook</code>ç›¸å…³çš„æ’ä»¶è¿˜éƒ½æ˜¯v1ç‰ˆçš„, å¯¹çº¯èŒæ–°æ¥è¯´æŒºéš¾æ‰¾åˆ°åˆé€‚çš„æ•™ç¨‹æ¥è¯¦ç»†æè¿°å…·ä½“å¦‚ä½•é…ç½®. ç›®å‰ç½‘ä¸Šä¹Ÿæœ‰äº†å¾ˆå¤šå¤§ä½¬å¼€æºçš„åŒ…å«æœ‰<code>caddy v2</code>, <code>hugo</code>ç­‰çš„<code>docker</code>é•œåƒå¯ä»¥æ–¹ä¾¿çš„ä¸€é”®æ­å»ºåšå®¢. ä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ä¼¼ä¹æ²¡æœ‰åŠæ³•æ­£å¸¸ç›‘å¬ç«¯å£ä¸€æ ·ï¼Œæ€»æ˜¯æ¥å—ä¸åˆ°ç›¸å…³çš„è¯·æ±‚</p>
<p>æ­¤å¤–, <code>caddy</code> v2ä¸v1ç›¸æ¯”é…ç½®æ–‡ä»¶æ”¹æˆäº†åŸç”Ÿ<code>json</code>æ ¼å¼, ä¹‹å‰v1ç‰ˆæœ¬çš„æ—¶å€™ä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯<code>Caddyfile</code>, å†™èµ·æ¥å³ç®€ä¾¿åˆæ˜“è¯». ç°åœ¨æ¢æˆ<code>json</code>ä¹‹å, è™½ç„¶è¿˜æ˜¯å¯ä»¥ç”¨<code>Caddyfile</code>æ¥å†™, ä½†æ˜¯å®é™…è¿è¡Œ<code>caddy</code>ä¼¼ä¹ä¼šå…ˆå°†<code>Caddyfile</code>è½¬åŒ–æˆ<code>json</code>ç„¶åå†è¿è¡Œ. è¿™å°±å¯¼è‡´å†™åœ¨<code>Caddyfile</code>é‡Œçš„é…ç½®, å°¤å…¶æ˜¯ç›¸å…³æ’ä»¶çš„é…ç½®å¾ˆå¯èƒ½åœ¨è½¬åŒ–çš„æ—¶å€™å‡ºç°æŸäº›é—®é¢˜å¯¼è‡´è¿è¡Œå¤±è´¥. è¿˜æœ‰å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜æ˜¯, å¤§å¤šv2ç‰ˆæœ¬çš„<code>caddy</code>æ’ä»¶æ˜¯æ”¯æŒ<code>Caddyfile</code>çš„å†™æ³•çš„, ä½†æœ‰äº›æ’ä»¶å°±åªæœ‰<code>json</code>æ ¼å¼çš„é…ç½®å†™æ³•. è€Œå‰é¢ä¹Ÿæåˆ°<code>Caddyfile</code>æ˜¯å¯ä»¥è¢«<code>caddy</code>è½¬åŒ–ä¸º<code>json</code>æ ¼å¼çš„, å¯ä»¥ä½¿ç”¨<code>caddy adapt</code>å‘½ä»¤æ˜¾å¼è½¬åŒ–æ–‡ä»¶ã€‚æ‰€ä»¥å³ä½¿éƒ¨åˆ†æ’ä»¶åœ¨æ–‡æ¡£ä¸­åªå†™äº†<code>Caddyfile</code>çš„å†™æ³•, ä½ ä¹Ÿå¯ä»¥å…ˆå†™è¿™éƒ¨åˆ†çš„é…ç½®å†™é“<code>Caddyfile</code>é‡Œç„¶åå†è½¬åŒ–ä¸º<code>json</code>ç»§ç»­é…ç½®</p>
<p>æ€»ä¸Šæ‰€è¿°, æœ€ç»ˆé€‰æ‹©äº†æœ¬åœ°ä½¿ç”¨<code>xcaddy</code>æ„å»ºå¸¦æœ‰<code>vrongmeal/caddygit</code>, <code>WingLim/caddy-webhook </code>, <code>mholt/caddy-webdav</code>è¿™ä¸‰ä¸ªæ’ä»¶çš„<code>caddy v2.6.4</code>åœ¨æœ¬åœ°è¿è¡Œ<code>json</code>æ ¼å¼é…ç½®æ–‡ä»¶çš„æ–¹å¼å®ŒæˆæœåŠ¡å™¨çš„è·¯ç”±é…ç½®</p>
<h4 id="bitwarden"><code>bitwarden</code></h4>
<p><code>bitwarden</code>æ˜¯ä¸€ä¸ªå¼€æº, æ–¹ä¾¿çš„å¯†ç ç®¡ç†å™¨, åœ¨ç½‘é¡µ(<code>chrome</code>, <code>firefox</code>, <code>safair</code>)/<code>android</code>/<code>ios</code>/<code>windows</code>/<code>linux</code>ç­‰å…¨å¹³å°éƒ½æœ‰ç›¸å…³å®¢æˆ·ç«¯(ç½‘é¡µæ’ä»¶), æ”¯æŒéƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨æ„å»ºè‡ªå·±ä¸“å±çš„å¯†ç åº“ï¼Œæœ‰æ•ˆçš„æé«˜äº†å®‰å…¨æ€§. ä¹‹å‰<code>caddy</code>é…ç½®<code>bitwarden</code>çš„æ—¶å€™, å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„dockeré•œåƒ, åªç”¨æ˜ å°„ä¸€ä¸‹ç«¯å£å°±å¯ä»¥ä¸€é”®éƒ¨ç½². ç°åœ¨<code>caddy</code>å‡çº§åˆ°v2ä¹‹åå¥½åƒå¯¹<code>bitwarden</code>è¿˜ä¸é€‚é…, åªèƒ½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„<code>vaultwarden</code>(<code>bitwarden</code>çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ç‰ˆæœ¬)æ¥éƒ¨ç½²</p>
<h4 id="hugo"><code>hugo</code></h4>
<p><code>hugo</code>æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„ä»mdæ–‡æ¡£æ„å»ºé™æ€ç½‘é¡µçš„å·¥å…·, éå¸¸ç¬¦åˆæˆ‘ç›®å‰çš„éœ€æ±‚. ä½†æ˜¯æ³¨æ„å¾ˆå¤šç½‘ç«™çš„ä¸»é¢˜è¦æ±‚<code>hugo</code>æ˜¯<code>extend</code>ç‰ˆ(<code>hugo</code>å®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨<code>extend</code>ç‰ˆ), åŒæ—¶ç”±äºä¸»é¢˜æ¨¡æ¿çš„æ›´æ–°, å¾ˆå¤šä¸»é¢˜å¯¹<code>hugo</code>çš„ç‰ˆæœ¬è¦æ±‚ä¼šæ¯”è¾ƒæ–°. ä½†<code>apt</code>å®‰è£…çš„æ˜¯0.55ç‰ˆçš„, ä¸ç¬¦åˆæˆ‘ç›®å‰ä¸»é¢˜çš„è¦æ±‚. å®˜æ–¹è¿˜æä¾›äº†snapå®‰è£…, ä½†æˆ‘åœ¨æœåŠ¡å™¨ä¸Šè£…çš„æ—¶å€™å‡ºç°äº†å¥½åƒè¯´ç³»ç»Ÿä¸åŒ¹é…çš„é”™è¯¯ğŸ˜”, çœ‹githubçš„issueä¸Šæœ‰äººæè¿‡ç±»ä¼¼çš„, ä¸‹é¢æœ‰ä¸ªå›ç­”è¯´ä»–å·²ç»ä¿®å¤äº†, å¯æ˜¯æˆ‘çš„è¿™ä¸ªè¿˜æ˜¯ä¸è¡Œ. æ‰€ä»¥æœ€åé‡‡ç”¨äº†åœ¨githubçš„releaseé‡Œä¸‹è½½<code>extend</code>ç‰ˆçš„debå®‰è£…åŒ…ï¼Œç„¶åå†åœ¨æœ¬åœ°<code>dpkg -i</code>å®‰è£…</p>
<h3 id="æ ¼å¼è¯´æ˜">æ ¼å¼è¯´æ˜</h3>
<p>æœ¬æ–‡å‡å®šä½ å·²ç»æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æœåŠ¡å™¨å’ŒåŸŸå, å¹¶ä¸”å·²ç»æŠŠdnsè§£æå¥½äº†, å›½å†…æœåŠ¡å™¨çš„å¤‡æ¡ˆä¹Ÿä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…. æœ¬æ–‡ä»…åŒ…å«<code>caddy</code>çš„å®‰è£…é…ç½®, é…ç½®æ–‡ä»¶<code>caddyfile.json</code>çš„ç¼–å†™, <code>hugo</code>çš„å®‰è£…é…ç½®å’Œ<code>vaultwarden</code> dockeré•œåƒçš„é…ç½®</p>
<p>æœ¬æ–‡æ¥ä¸‹æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„å¿…éœ€éœ€è¦è¯»è€…æœ¬äººæ ¹æ®è‡ªå·±æœåŠ¡å™¨ç­‰è¿›è¡Œä¿®æ”¹çš„åœ°æ–¹ä¼šä½¿ç”¨ç±»ä¼¼<code>@1{path}</code>çš„æ–¹å¼ä»£æŒ‡ï¼Œä¾‹å¦‚ä½ æœ¬åœ°çš„æŸä¸ªæ–‡ä»¶å¤¹åœ°å€ä¸º<code>/usr/local/bin</code>, åœ¨é…ç½®æ–‡ä»¶ä¸­ä¼šä»¥<code>@1{path}</code>ä»£æŒ‡è¿™ä¸ªåœ°å€(æ•°å­—æŒ‡çš„æ˜¯è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„ç¬¬å‡ ä¸ª, å¦‚æœä¸¤ä¸ªåœ°æ–¹ç”¨ä¸€ä¸ªçš„è¯å°±æ˜¯ä¸€ä¸ªåœ°å€). åŒç†<code>@1{domain}</code>ä»£æŒ‡æ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„éœ€è¦ä½ ä¿®æ”¹æˆè‡ªå·±çš„åŸŸå<code>www.your-domain.com</code></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="caddy-1">caddy</h3>
<p><code>caddy</code>ä»å®˜æ–¹é€”å¾„<code>apt</code>å®‰è£…çš„æ˜¯æ²¡æœ‰æ’ä»¶çš„, æ²¡æ’ä»¶æ²¡åŠæ³•å®Œæˆæ¥ä¸‹æ¥çš„éƒ¨ç½², ä½†æ˜¯ä»<code>apt</code>å®‰è£…çš„ä¼šé…å¥—ç›¸å…³çš„systemdæœåŠ¡, æ–¹ä¾¿åç»­ç®¡ç†è¿è¡Œé‡å¯ç­‰. å› æ­¤å…ˆ<code>apt</code>å®‰è£…æ²¡æœ‰æ’ä»¶çš„<code>caddy</code>ç„¶åå†é€šè¿‡<code>xcaddy</code>æ¥ç¼–è¯‘å¸¦æœ‰æ’ä»¶çš„<code>caddy</code>, ç¼–è¯‘å®Œæˆåæ›¿æ¢æ‰ä¹‹å‰<code>apt</code>å®‰è£…çš„<code>caddy</code></p>
<h4 id="aptå®‰è£…caddy">aptå®‰è£…caddy</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt install -y debian-keyring debian-archive-keyring apt-transport-https
</span></span><span class="line"><span class="cl">curl -1sLf <span class="s1">&#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key&#39;</span> <span class="p">|</span> gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
</span></span><span class="line"><span class="cl">curl -1sLf <span class="s1">&#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt&#39;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/caddy-stable.list
</span></span><span class="line"><span class="cl">apt update
</span></span><span class="line"><span class="cl">apt install caddy
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="goç¯å¢ƒ">goç¯å¢ƒ</h4>
<p>ç”±äº<code>xcaddy</code>æ˜¯ç”±<code>go</code>è¯­è¨€ç¼–è¯‘å®‰è£…çš„, æ‰€ä»¥éœ€è¦å…ˆé…ç½®ç¯å¢ƒ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget https://go.dev/dl/go1.20.7.linux-amd64.tar.gz
</span></span><span class="line"><span class="cl">rm -rf /usr/local/go <span class="o">&amp;&amp;</span> tar -C /usr/local -xzf go1.20.7.linux-amd64.tar.gz <span class="o">&amp;&amp;</span> rm go1.20.7.linux-amd64.tar.gz
</span></span><span class="line"><span class="cl">vim ~/.bashrc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#å†™å…¥æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/usr/local/go/bin
</span></span><span class="line"><span class="cl"><span class="c1">#ä¿å­˜æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="xcaddy">xcaddy</h4>
<p>å®‰è£…<code>xcaddy</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go install github.com/caddyserver/xcaddy/cmd/xcaddy@latest
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>xcaddy</code>ç¼–è¯‘å¸¦æ’ä»¶çš„<code>caddy</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">version</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="s2">&#34;https://api.github.com/repos/caddyserver/caddy/releases/latest&#34;</span> <span class="p">|</span> grep tag_name <span class="p">|</span> cut -f4 -d <span class="s2">&#34;\&#34;&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">go/bin/xcaddy build <span class="si">${</span><span class="nv">version</span><span class="si">}</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--with github.com/WingLim/caddy-webhook <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --with github.com/mholt/caddy-webdav <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --with github.com/vrongmeal/caddygit
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åä¼šç¼–è¯‘å‡ºå¸¦æœ‰è¿™ä¸‰ä¸ªæ’ä»¶çš„<code>caddy</code>åˆ°å½“å‰ç›®å½•, å¦‚æœä½ éœ€è¦å…¶ä»–æ’ä»¶çš„è¯, åé¢<code>--with</code>æ¥ç€è·Ÿæ’ä»¶çš„<code>github</code>ä»“åº“åœ°å€å°±è¡Œäº†</p>
<p>ç¼–è¯‘å®Œæˆåä½¿ç”¨<code>whereis caddy</code>æŸ¥çœ‹ä¹‹å‰<code>apt</code>å®‰è£…çš„<code>caddy</code>å®‰è£…åˆ°å“ªé‡Œäº†, å†ç”¨<code>mv</code>æŠŠåˆšç¼–è¯‘çš„å¸¦æ’ä»¶çš„æ›¿æ¢æ‰<code>apt</code>å®‰è£…çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv caddy /usr/bin/caddy
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="hugo-1">hugo</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">version</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="s2">&#34;https://api.github.com/repos/gohugoio/hugo/releases/latest&#34;</span> <span class="p">|</span> grep tag_name <span class="p">|</span> cut -f4 -d <span class="s2">&#34;\&#34;&#34;</span> <span class="p">|</span> grep -oE <span class="s1">&#39;([0-9]+\.?)+&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">wget https://github.com/gohugoio/hugo/releases/download/v<span class="si">${</span><span class="nv">version</span><span class="si">}</span>/hugo_extended_<span class="si">${</span><span class="nv">version</span><span class="si">}</span>_linux-amd64.deb
</span></span><span class="line"><span class="cl">dpkg -i hugo_extended_<span class="si">${</span><span class="nv">version</span><span class="si">}</span>_linux-amd64.deb
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="vaultwarden_setup">vaultwarden</h3>
<p>éœ€è¦å…ˆå®‰è£…<code>docker</code>, å®‰è£…å¥½åå†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt-get install ca-certificates curl gnupg
</span></span><span class="line"><span class="cl">install -m <span class="m">0755</span> -d /etc/apt/keyrings
</span></span><span class="line"><span class="cl">curl -fsSL https://download.docker.com/linux/debian/gpg <span class="p">|</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</span></span><span class="line"><span class="cl">chmod a+r /etc/apt/keyrings/docker.gpg
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [arch=&#34;</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2">&#34; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian &#34;</span><span class="k">$(</span>. /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VERSION_CODENAME</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34; stable&#34;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl">apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -d --name vaultwarden <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">SIGNUPS_ALLOWED</span><span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">WEBSOCKET_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">LOG_FILE</span><span class="o">=</span>/data/bitwarden.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p @1<span class="o">{</span>vault_port<span class="o">}</span>:80 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p @2<span class="o">{</span>vault_port<span class="o">}</span>:3012 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v /vw-data/:/data/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  vaultwarden/server:1.27.0
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤å¤„çš„<code>@1{vault-port}</code>å’Œ<code>@2{vault-port}</code>éœ€è¦æ›¿æ¢æ‰æˆä¹‹åä½ åœ¨<code>caddy</code>çš„é…ç½®æ–‡ä»¶ä¸­åä»£çš„ç«¯å£, å› æ­¤å»ºè®®é…ç½®å¥½å…¶ä»–ä¹‹åå†å®‰è£…è¿™ä¸ª</p>
<h2 id="é…ç½®">é…ç½®</h2>
<p>å˜é‡è§£é‡Šå¦‚ä¸‹ï¼Œéœ€è¦å°†ä¸‹é¢æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„åœ°æ–¹æ›¿æ¢æˆä½ è‡ªå·±çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">@1{vault_port}:80	--caddyåä»£çš„bitwardenç«¯å£ï¼Œä¾‹å¦‚8080ï¼š80
</span></span><span class="line"><span class="cl">@2{vault_port}:3012	--caddyåä»£çš„bitwardenç«¯å£ï¼Œä¾‹å¦‚3012ï¼š3012
</span></span><span class="line"><span class="cl">@3{v2ray_port}	--caddyåä»£çš„v2rayç«¯å£ï¼Œä¾‹å¦‚2233
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@1{cer_path}	--bitwardenç½‘ç«™çš„è¯ä¹¦ceréƒ¨åˆ†ï¼Œä¾‹å¦‚usr/local/etc/ssl/bitwarden.cer
</span></span><span class="line"><span class="cl">@1{key_path} 	--bitwardenç½‘ç«™çš„è¯ä¹¦keyéƒ¨åˆ†, ä¾‹å¦‚usr/local/etc/ssl/bitwarden.key
</span></span><span class="line"><span class="cl">@2{cer_path}	--blogç½‘ç«™çš„è¯ä¹¦ceréƒ¨åˆ†
</span></span><span class="line"><span class="cl">@2{key_path}	--blogç½‘ç«™çš„è¯ä¹¦keyéƒ¨åˆ†
</span></span><span class="line"><span class="cl">@3{v2ray_path}	--v2rayçš„è®¿é—®è·¯å¾„ï¼Œä»¥/å¼€å¤´ï¼Œä¾‹å¦‚/vvvã€‚ä½†æ˜¯ä¸èƒ½å’Œ@4{v2ray_www_path}çš„æœ€åä¸€çº§ç›¸åŒï¼Œå³å¦‚æœ@4{v2ray_www_path}æ˜¯/var/www/v2rayçš„è¯ï¼Œå°±ä¸èƒ½æ˜¯/v2ray
</span></span><span class="line"><span class="cl">@4{v2ray_www_path}	--v2rayç½‘ç«™çš„å­˜æ”¾è·¯å¾„ï¼Œä¾‹å¦‚/var/www/v2ray
</span></span><span class="line"><span class="cl">@5{blog_path}	--å­˜æ”¾åšå®¢ç½‘ç«™çš„åœ°å€, ä¾‹å¦‚/var/www/myblog
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@1{vault_domain}	--bitwardençš„åŸŸå
</span></span><span class="line"><span class="cl">@2{blog_domain}		--blogçš„åŸŸå
</span></span><span class="line"><span class="cl">@3{v2ray_domain}	--v2rayçš„ä¼ªè£…åŸŸå
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@1{github_url}		--å­˜æ”¾åšå®¢æ–‡æ¡£çš„githubä»“åº“åœ°å€
</span></span><span class="line"><span class="cl">@1{github_token}	--æœ‰å­˜æ”¾åšå®¢æ–‡æ¡£çš„githubä»“åº“è®¿é—®æƒé™çš„token
</span></span><span class="line"><span class="cl">@1{github_secret}	--webhookçš„secret
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@1{v2ray_uuid}	--v2rayé…ç½®
</span></span><span class="line"><span class="cl">@1{your_email}	--æ³¨å†ŒåŸŸåæ—¶ä½¿ç”¨çš„é‚®ç®±
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@1{cloudflare_key}	--cloudflareçš„key
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="caddy-2">caddy</h3>
<h4 id="caddyservice">caddy.service</h4>
<p>é¦–å…ˆéœ€è¦ä¿®æ”¹ä»¥ä¸‹<code>caddy.service</code>é…ç½®ç›¸å…³æœåŠ¡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /etc/systemd/system/caddy.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># caddy.service</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># For using Caddy with a config file.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Make sure the ExecStart and ExecReload commands are correct</span>
</span></span><span class="line"><span class="cl"><span class="c1"># for your installation.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># See https://caddyserver.com/docs/install for instructions.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># WARNING: This service does not use the --resume flag, so if you</span>
</span></span><span class="line"><span class="cl"><span class="c1"># use the API to make changes, they will be overwritten by the</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Caddyfile next time the service is restarted. If you intend to</span>
</span></span><span class="line"><span class="cl"><span class="c1"># use Caddy&#39;s API to configure it, add the --resume flag to the</span>
</span></span><span class="line"><span class="cl"><span class="c1"># `caddy run` command or use the caddy-api.service file instead.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>Caddy
</span></span><span class="line"><span class="cl"><span class="nv">Documentation</span><span class="o">=</span>https://caddyserver.com/docs/
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target network-online.target
</span></span><span class="line"><span class="cl"><span class="nv">Requires</span><span class="o">=</span>network-online.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>notify
</span></span><span class="line"><span class="cl"><span class="nv">User</span><span class="o">=</span>caddy
</span></span><span class="line"><span class="cl"><span class="nv">Group</span><span class="o">=</span>caddy
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/caddy run --environ --config /etc/caddy/caddyfile.json
</span></span><span class="line"><span class="cl"><span class="nv">ExecReload</span><span class="o">=</span>/usr/bin/caddy reload --config /etc/caddy/caddyfile.json --force
</span></span><span class="line"><span class="cl"><span class="nv">TimeoutStopSec</span><span class="o">=</span>5s
</span></span><span class="line"><span class="cl"><span class="nv">LimitNOFILE</span><span class="o">=</span><span class="m">1048576</span>
</span></span><span class="line"><span class="cl"><span class="nv">LimitNPROC</span><span class="o">=</span><span class="m">512</span>
</span></span><span class="line"><span class="cl"><span class="nv">PrivateTmp</span><span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="nv">ProtectSystem</span><span class="o">=</span>full
</span></span><span class="line"><span class="cl"><span class="nv">AmbientCapabilities</span><span class="o">=</span>CAP_NET_BIND_SERVICE
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /etc/systemd/system/caddy.service
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /etc/systemd/system/caddy.service
</span></span><span class="line"><span class="cl">systemctl daemon-reload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /usr/bin/caddy
</span></span><span class="line"><span class="cl">chmod <span class="m">755</span> /usr/bin/caddy
</span></span><span class="line"><span class="cl">setcap <span class="s1">&#39;cap_net_bind_service=+ep&#39;</span> /usr/bin/caddy
</span></span><span class="line"><span class="cl">groupadd -g <span class="m">33</span> caddy
</span></span><span class="line"><span class="cl">useradd <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -g caddy --no-user-group <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --home-dir /var/caddy --no-create-home <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --shell /usr/sbin/nologin <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --system --uid <span class="m">33</span> caddy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir /etc/caddy
</span></span><span class="line"><span class="cl">mkdir /var/www
</span></span><span class="line"><span class="cl">mkdir /var/caddy
</span></span><span class="line"><span class="cl">mkdir /etc/ssl/caddy
</span></span><span class="line"><span class="cl">touch /etc/caddy/caddyfile.json
</span></span><span class="line"><span class="cl">touch /var/log/caddy.log
</span></span><span class="line"><span class="cl">chown caddy:caddy /var/caddy
</span></span><span class="line"><span class="cl">chown -R root:caddy /etc/caddy
</span></span><span class="line"><span class="cl">chown -R root:caddy /etc/ssl/caddy
</span></span><span class="line"><span class="cl">chown -R root:caddy /var/www
</span></span><span class="line"><span class="cl">chmod <span class="m">555</span> /var/caddy
</span></span><span class="line"><span class="cl">chmod <span class="m">777</span> /var/www
</span></span><span class="line"><span class="cl">chmod <span class="m">0770</span> /etc/ssl/caddy
</span></span><span class="line"><span class="cl">chown root:caddy /var/log/caddy.log
</span></span><span class="line"><span class="cl">chown root:root /etc/caddy/caddyfile.json
</span></span><span class="line"><span class="cl">chmod <span class="m">770</span> /var/log/caddy.log
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /etc/caddy/caddyfile.json
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="caddyfilejson">caddyfile.json</h4>
<p>æ¥ç€é…ç½®<code>caddyfile.json</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span><span class="lnt">464
</span><span class="lnt">465
</span><span class="lnt">466
</span><span class="lnt">467
</span><span class="lnt">468
</span><span class="lnt">469
</span><span class="lnt">470
</span><span class="lnt">471
</span><span class="lnt">472
</span><span class="lnt">473
</span><span class="lnt">474
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">vim</span> <span class="err">/etc/caddy/caddyfile.json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;logging&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;logs&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;exclude&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log2&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;log0&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;writer&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/log/caddy.log&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;file&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;roll_keep&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;roll_size_mb&#34;</span><span class="p">:</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;level&#34;</span><span class="p">:</span> <span class="s2">&#34;INFO&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;include&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log0&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;log1&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;writer&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/log/caddy.log&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;file&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;include&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log1&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;log2&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;writer&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/log/caddy.log&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;file&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;include&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;http.log.access.log2&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;apps&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;tls&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;certificates&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;load_files&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;certificate&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{cer_path}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{key_path}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;tags&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;cert0&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;certificate&#34;</span><span class="p">:</span> <span class="s2">&#34;@2{cer_path}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;@2{cer_path}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;tags&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;cert1&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;automation&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;policies&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;subjects&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@1{vault_domain}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@2{blog_domain}&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;subjects&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;issuers&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{your_email}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;acme&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{your_email}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;zerossl&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;http&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;servers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;srv1&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;listen&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;:80&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@1{vault_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;static_response&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;headers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;Location&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;https://@1{vault_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">]</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;status_code&#34;</span><span class="p">:</span> <span class="mi">302</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@2{blog_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;static_response&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;headers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;Location&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;https://@2{blog_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">]</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;status_code&#34;</span><span class="p">:</span> <span class="mi">302</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;static_response&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;headers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;Location&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;https://@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">]</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;status_code&#34;</span><span class="p">:</span> <span class="mi">302</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;srv0&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;listen&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;:443&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;tls_connection_policies&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;sni&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                  <span class="s2">&#34;@2{blog_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;certificate_selection&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;any_tag&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                  <span class="s2">&#34;cert1&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;sni&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                  <span class="s2">&#34;@1{vault_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;certificate_selection&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;any_tag&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                  <span class="s2">&#34;cert0&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;sni&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                  <span class="s2">&#34;@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">              <span class="p">},</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;cipher_suites&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;protocol_min&#34;</span><span class="p">:</span> <span class="s2">&#34;tls1.2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;protocol_max&#34;</span><span class="p">:</span> <span class="s2">&#34;tls1.3&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{}</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;logs&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;logger_names&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;@3{v2ray_domain}&#34;</span><span class="p">:</span> <span class="s2">&#34;log0&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;logger_names&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;@1{vault_domain}&#34;</span><span class="p">:</span> <span class="s2">&#34;log1&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;logger_names&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;@2{blog_domain}&#34;</span><span class="p">:</span> <span class="s2">&#34;log2&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;skip_hosts&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@1{vault_domain}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@2{blog_domain}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="s2">&#34;@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@3{v2ray_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;vars&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;root&#34;</span><span class="p">:</span> <span class="s2">&#34;@4{v2ray_www_path}&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">},</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;encodings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;gzip&#34;</span><span class="p">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;encode&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;prefer&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;gzip&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;reverse_proxy&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;upstreams&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">&#34;dial&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost:@3{v2ray_port}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">],</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;header&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;Connection&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;*Upgrade*&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">],</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;Upgrade&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;websocket&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">]</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;@3{v2ray_path}&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;file_server&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;hide&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;/etc/caddy/Caddyfile&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@1{vault_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;encodings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;gzip&#34;</span><span class="p">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;encode&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;prefer&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;gzip&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;reverse_proxy&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;upstreams&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">&#34;dial&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost:@2{vault_port}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">],</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;/notifications/hub&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;reverse_proxy&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;headers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">&#34;set&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="nt">&#34;X-Real-Ip&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                                  <span class="s2">&#34;localhost&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="p">]</span>
</span></span><span class="line"><span class="cl">                              <span class="p">}</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">},</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;upstreams&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">&#34;dial&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost:@1{vault_port}&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;host&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;@5{blog_domain}&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;vars&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;root&#34;</span><span class="p">:</span> <span class="s2">&#34;@5{blog_path}/public&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">},</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;file_server&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;hide&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;/etc/caddy/Caddyfile&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">]</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;terminal&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;not&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;/webhook&#34;</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;subroute&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;branch&#34;</span><span class="p">:</span> <span class="s2">&#34;main&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;webhook&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="s2">&#34;@5{blog_path}/content&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;repo&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{github_url}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;token&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{github_token}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;secret&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{github_secret}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;hugo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;--destination&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="s2">&#34;@5{blog_path}/public&#34;</span>
</span></span><span class="line"><span class="cl">                          <span class="p">],</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;submodule&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;github&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                      <span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">],</span>
</span></span><span class="line"><span class="cl">              <span class="nt">&#34;match&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;/webhook&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="v2ray">v2ray</h3>
<p><a class="link" href="https://github.com/zxcvos/Xray-script"  target="_blank" rel="noopener"
    >https://github.com/zxcvos/Xray-script</a></p>
<h4 id="configjson">config.json</h4>
<p>mkdir -p /usr/local/etc/v2ray/</p>
<p>mkdir -p /usr/local/etc/ssl/ecc/</p>
<p>vim /usr/local/etc/v2ray/config.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;log&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;access&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/log/v2ray/access.log&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;error&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/log/v2ray/error.log&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;loglevel&#34;</span><span class="p">:</span> <span class="s2">&#34;warning&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dns&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;stats&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;inbounds&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;port&#34;</span><span class="p">:</span> <span class="err">@</span><span class="mi">3</span><span class="p">{</span><span class="err">v2ray_port</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;listen&#34;</span><span class="p">:</span> <span class="s2">&#34;127.0.0.1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;vmess&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;settings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;clients&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{v2ray_uuid}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;level&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;@1{your_email}&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;decryption&#34;</span><span class="p">:</span> <span class="s2">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;streamSettings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;network&#34;</span><span class="p">:</span> <span class="s2">&#34;ws&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;security&#34;</span><span class="p">:</span> <span class="s2">&#34;none&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;wsSettings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="s2">&#34;@3{v2ray_path}&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;outbounds&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;tag&#34;</span><span class="p">:</span> <span class="s2">&#34;direct&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;freedom&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;settings&#34;</span><span class="p">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;tag&#34;</span><span class="p">:</span> <span class="s2">&#34;blocked&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;blackhole&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;settings&#34;</span><span class="p">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;routing&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;domainStrategy&#34;</span><span class="p">:</span> <span class="s2">&#34;IPIfNonMatch&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;rules&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;field&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;domain&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;googleapis.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;goofle.cn&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;outboundTag&#34;</span><span class="p">:</span> <span class="s2">&#34;direct&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;outboundTag&#34;</span><span class="p">:</span> <span class="s2">&#34;blocked&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;ip&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;geoip:private&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;field&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;policy&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;reverse&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;transport&#34;</span><span class="p">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="hugo-2">hugo</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo new site @5<span class="o">{</span>blog_path<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼šåœ¨<code>@5{blog_path}</code>å¤„å»ºç«‹ç½‘ç«™çš„ç›®å½•</p>
<h3 id="vaultwardenvaultwarden_setup"><a class="link" href="#vaultwarden_setup" >vaultwarden</a></h3>
<h3 id="ç¼–å†™è„šæœ¬ç›‘è§†gitæ´»åŠ¨å¹¶æ›´æ–°ç½‘é¡µ">ç¼–å†™è„šæœ¬ç›‘è§†gitæ´»åŠ¨å¹¶æ›´æ–°ç½‘é¡µ</h3>
<p>æŒ‰ç†æ¥è¯´æ˜¯ä¸éœ€è¦è¿™ä¸€æ­¥çš„ï¼Œåº”è¯¥æ˜¯<code>caddy</code>æ¥æ”¶åˆ°<code>github</code>å‘æ¥çš„<code>webhook</code>ç„¶åå°±å¯åŠ¨ç›¸å…³æ’ä»¶æŠŠæ›´æ–°çš„ä»“åº“<code>pull</code>ä¸‹æ¥, ç„¶åå°±è°ƒç”¨<code>hugo --destination @5{blog_path}/public</code>å‘½ä»¤æ›´æ–°ç½‘é¡µäº†</p>
<p>ä½†å®é™…ä¸Šå‘ç°è¿™ä¸ªå‘½ä»¤å±…ç„¶æ˜¯åœ¨<code>/</code>æ ¹ç›®å½•ä¸‹æ‰§è¡Œçš„, å³ä½¿åœ¨<code>caddyfile.json</code>é‡ŒæŒ‡å®š<code>root * @5{blog_path} </code>äº†ä¹Ÿä¸è¡Œ.</p>
<p>å¼€å§‹è¿˜æƒ³æŠŠå‘½ä»¤æ¢æˆæ‰§è¡Œå…¶ä»–çš„è„šæœ¬, ç„¶ååœ¨è„šæœ¬ä¸­<code>cd</code>åˆ°è·¯å¾„å†æ‰§è¡Œ<code>hugo</code>ç”Ÿæˆç½‘é¡µ. ä½†æ˜¯å¥½åƒä¹Ÿæ²¡æ³•æ­£å¸¸è¿è¡Œèµ·æ¥</p>
<p>åªèƒ½é€€è€Œæ±‚å…¶æ¬¡, å•ç‹¬ç¼–å†™ä¸€ä¸ª<code>inotify.sh</code>ç›‘æµ‹<code>@5{blog_path}/content/.git/index</code>è¿™ä¸ªæ–‡ä»¶çš„å˜åŠ¨æƒ…å†µç„¶åå†æ‰§è¡Œæ›´æ–°ç½‘é¡µ, è„šæœ¬å¦‚ä¸‹(éœ€è¦å…ˆå®‰è£…<code>inotify</code>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">filename</span><span class="o">=</span><span class="nv">$@</span>5<span class="o">{</span>blog_path<span class="o">}</span>/content/.git/index
</span></span><span class="line"><span class="cl">inotifywait -mrq --format <span class="s1">&#39;%e&#39;</span> --event create,delete,modify  <span class="nv">$filename</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> event
</span></span><span class="line"><span class="cl">  <span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="nb">cd</span> @5<span class="o">{</span>blog_path<span class="o">}</span> <span class="o">&amp;&amp;</span> hugo
</span></span><span class="line"><span class="cl">  <span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åæ‰§è¡Œ<code>nohup bash inotify.sh &gt; /dev/null 2&gt;&amp;1</code>è®©è„šæœ¬åœ¨åå°è¿è¡Œå°±å¯ä»¥äº†</p>
<h2 id="ä¸ºç½‘ç«™ç”³è¯·è¯ä¹¦-ä»¥cloudflareä¸ºä¾‹">ä¸ºç½‘ç«™ç”³è¯·è¯ä¹¦ (ä»¥cloudflareä¸ºä¾‹)</h2>
<p>å®‰è£…<code>acme.sh</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl https://get.acme.sh <span class="p">|</span> sh
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CF_Key</span><span class="o">=</span><span class="s2">&#34;@1{cloudflare_key}&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CF_Email</span><span class="o">=</span><span class="s2">&#34;@1{your_email}&#34;</span>
</span></span><span class="line"><span class="cl">acme.sh --register-account -m @1<span class="o">{</span>your_email<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åè¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ä¸º<code>blog</code>ç½‘ç«™ç”³è¯·è¯ä¹¦</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">acme.sh --issue --dns dns_cf -d @2<span class="o">{</span>blog_domain<span class="o">}</span> --keylength ec-256 <span class="c1">#--debug 2 å¦‚æœå‡ºé”™å¯ä»¥åŠ è¿™ä¸ªå‚æ•°çœ‹çœ‹å“ªé‡ŒæŠ¥é”™</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä¸‹å‘½ä»¤å¯å°†è¯ä¹¦å®‰è£…åœ¨<code>@2{cer_path}</code>, <code>@2{key_path}</code>è·¯å¾„ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">acme.sh --installcert -d @2<span class="o">{</span>blog_domain<span class="o">}</span> --ecc --key-file @2<span class="o">{</span>key_path<span class="o">}</span> --fullchain-file @2<span class="o">{</span>cer_path<span class="o">}</span> --force
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /etc/sysctl.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># max open files</span>
</span></span><span class="line"><span class="cl">fs.file-max <span class="o">=</span> <span class="m">51200</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max read buffer</span>
</span></span><span class="line"><span class="cl">net.core.rmem_max <span class="o">=</span> <span class="m">67108864</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max write buffer</span>
</span></span><span class="line"><span class="cl">net.core.wmem_max <span class="o">=</span> <span class="m">67108864</span>
</span></span><span class="line"><span class="cl"><span class="c1"># default read buffer</span>
</span></span><span class="line"><span class="cl">net.core.rmem_default <span class="o">=</span> <span class="m">65536</span>
</span></span><span class="line"><span class="cl"><span class="c1"># default write buffer</span>
</span></span><span class="line"><span class="cl">net.core.wmem_default <span class="o">=</span> <span class="m">65536</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max processor input queue</span>
</span></span><span class="line"><span class="cl">net.core.netdev_max_backlog <span class="o">=</span> <span class="m">4096</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max backlog</span>
</span></span><span class="line"><span class="cl">net.core.somaxconn <span class="o">=</span> <span class="m">4096</span>
</span></span><span class="line"><span class="cl"><span class="c1"># resist SYN flood attacks</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_syncookies <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="c1"># reuse timewait sockets when safe</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_tw_reuse <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="c1"># turn off fast timewait sockets recycling</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_tw_recycle <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># short FIN timeout</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_fin_timeout <span class="o">=</span> <span class="m">30</span>
</span></span><span class="line"><span class="cl"><span class="c1"># short keepalive time</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_keepalive_time <span class="o">=</span> <span class="m">1200</span>
</span></span><span class="line"><span class="cl"><span class="c1"># outbound port range</span>
</span></span><span class="line"><span class="cl">net.ipv4.ip_local_port_range <span class="o">=</span> <span class="m">10000</span> <span class="m">65000</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max SYN backlog</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_max_syn_backlog <span class="o">=</span> <span class="m">4096</span>
</span></span><span class="line"><span class="cl"><span class="c1"># max timewait sockets held by system simultaneously</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_max_tw_buckets <span class="o">=</span> <span class="m">5000</span>
</span></span><span class="line"><span class="cl"><span class="c1"># TCP receive buffer</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_rmem <span class="o">=</span> <span class="m">4096</span> <span class="m">87380</span> <span class="m">67108864</span>
</span></span><span class="line"><span class="cl"><span class="c1"># TCP write buffer</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_wmem <span class="o">=</span> <span class="m">4096</span> <span class="m">65536</span> <span class="m">67108864</span>
</span></span><span class="line"><span class="cl"><span class="c1"># turn on path MTU discovery</span>
</span></span><span class="line"><span class="cl">net.ipv4.tcp_mtu_probing <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="c1"># for high-latency network</span>
</span></span><span class="line"><span class="cl">net.core.default_qdisc<span class="o">=</span>fq
</span></span><span class="line"><span class="cl">net.ipv4.tcp_congestion_control <span class="o">=</span> bbr
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sysctl -p
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">apt install libcap2-bin
</span></span><span class="line"><span class="cl">setcap <span class="s1">&#39;cap_net_bind_service=+ep&#39;</span> /usr/bin/caddy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /usr/bin/caddy
</span></span><span class="line"><span class="cl">chown -R root:root /etc/caddy
</span></span><span class="line"><span class="cl">chown -R root:www-data /etc/ssl/caddy
</span></span><span class="line"><span class="cl">chown root:www-data /var/log/caddy.log
</span></span><span class="line"><span class="cl">chown root:root /etc/systemd/system/caddy.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chmod <span class="m">755</span> /usr/bin/caddy
</span></span><span class="line"><span class="cl">chmod <span class="m">770</span> /etc/ssl/caddy
</span></span><span class="line"><span class="cl">chmod <span class="m">770</span> /var/log/caddy.log
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /etc/systemd/system/caddy.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/v2ray/v2ray.cer
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/v2ray/v2ray.key
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/v2ray/v2ray.cer
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/v2ray/v2ray.key
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/ssl/ecc/password.cer
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/ssl/ecc/password.key
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/ssl/ecc/password.cer
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/ssl/ecc/password.key
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/v2ray/txt.cer
</span></span><span class="line"><span class="cl">chown root:root /usr/local/etc/v2ray/txt.key
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/v2ray/txt.cer
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> /usr/local/etc/v2ray/txt.key
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir /var/www/public
</span></span><span class="line"><span class="cl">vim /var/www/public/index.html
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å¸¸ç”¨å‘½ä»¤è¡¨">å¸¸ç”¨å‘½ä»¤è¡¨</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">bash &lt;<span class="o">(</span>curl -L -s check.unlock.media<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">acme:
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">CF_Key</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">CF_Email</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    acme.sh --register-account -m example@gmail.com
</span></span><span class="line"><span class="cl">    acme.sh --issue --dns dns_cf -d example.com --keylength ec-256 --debug <span class="m">2</span>
</span></span><span class="line"><span class="cl">    acme.sh --installcert -d example.com --ecc --key-file /usr/local/etc/ssl/example.key --fullchain-file /usr/local/etc/ssl/example.cer --force
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">caddy:
</span></span><span class="line"><span class="cl">	vim /etc/caddy/caddyfile.json
</span></span><span class="line"><span class="cl">    systemctl daemon-reload
</span></span><span class="line"><span class="cl">    caddy list-modules	<span class="c1">#æŸ¥çœ‹caddyå®‰è£…äº†å“ªäº›æ’ä»¶</span>
</span></span><span class="line"><span class="cl">    journalctl --boot -u caddy.service	<span class="c1">#æŸ¥çœ‹caddyè¯¦ç»†è¿è¡Œæ—¥å¿—</span>
</span></span><span class="line"><span class="cl">    systemctl restart caddy <span class="o">&amp;&amp;</span> systemctl status caddy	<span class="c1">#é‡å¯caddyå¹¶æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">v2rayï¼š
</span></span><span class="line"><span class="cl">    vim /usr/local/etc/v2ray/config.json
</span></span><span class="line"><span class="cl">	systemctl daemon-reload
</span></span><span class="line"><span class="cl">	systemctl stop v2ray
</span></span><span class="line"><span class="cl">    systemctl restart v2ray <span class="o">&amp;&amp;</span> systemctl status v2ray
</span></span><span class="line"><span class="cl">    journalctl -u v2ray
</span></span><span class="line"><span class="cl">	bash install-release.sh	<span class="c1">#æ›´æ–°v2rayç‰ˆæœ¬</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ufw:
</span></span><span class="line"><span class="cl">	utf allow 80	<span class="c1">#é˜²ç«å¢™å¼€å¯80ç«¯å£å…è®¸å¤–ç•Œè®¿é—®ï¼Œ éœ€è¦æå‰aptå®‰è£…ufw</span>
</span></span><span class="line"><span class="cl">	ufw delete 80	<span class="c1">#å…³é—­80ç«¯å£</span>
</span></span><span class="line"><span class="cl">    ufw status numbered	<span class="c1">#æŸ¥çœ‹å¼€å¯äº†å“ªäº›ç«¯å£</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">dockerï¼š
</span></span><span class="line"><span class="cl">	docker run -d --name vaultwarden <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">SIGNUPS_ALLOWED</span><span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">WEBSOCKET_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">LOG_FILE</span><span class="o">=</span>/data/bitwarden.log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p @1<span class="o">{</span>vault_port<span class="o">}</span>:80 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p @2<span class="o">{</span>vault_port<span class="o">}</span>:3012 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v /vw-data/:/data/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  vaultwarden/server:1.27.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">xcaddyï¼š
</span></span><span class="line"><span class="cl">	xcaddy build v2.6.0 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--with github.com/WingLim/caddy-webhook <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--with github.com/mholt/caddy-webdav <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>	--with github.com/vrongmeal/caddygit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">inotify:
</span></span><span class="line"><span class="cl">	  nohup bash inotify.sh &gt; /dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å…¶ä»–">å…¶ä»–</h2>
<p>æ­å»ºæ‰€ç”¨çš„æ‰€æœ‰é…ç½®æ–‡ä»¶å¦‚ä¸Šæ‰€ç¤º, æ¥ä¸‹æ¥å†™å†™æˆ‘åœ¨æ­å»ºä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</p>
<ol>
<li>åŸæœ¬v2rayä½¿ç”¨çš„æ˜¯h2+tlsåè®®, ä½†æ˜¯ä¼¼ä¹æ²¡æ³•åœ¨caddy v2ä¸­æ­£å¸¸è¿è¡Œ, ç„¶åçœ‹åˆ°å¥½å¤šæ•™ç¨‹éƒ½æ˜¯ç”¨ws, æˆ‘å°±ä¹Ÿæ”¹æˆäº†ws, ç„¶åå°±é¡ºåˆ©è¿è¡Œäº†</li>
<li>bitwardenä¹‹å‰çš„å®˜æ–¹dockeré•œåƒæ˜¯å¯ä»¥ç›´æ¥ç›‘å¬443ç«¯å£ä¼ æ¥çš„httpsè¯·æ±‚. ä½†æ–°ç‰ˆçš„Vaultwardenè¦é…å¤‡httpsçš„è¯å¥½åƒå¾ˆéº»çƒ¦, å¹¶ä¸”ç”³è¯·çš„è¯ä¹¦æ˜¯åœ¨dockerå®¹å™¨é‡Œçš„, caddyæ— æ³•è®¿é—®. ä½†å®é™…ä¸Šå¯ä»¥å…ˆç»™åŸŸåç”³è¯·è¯ä¹¦, httpsçš„è¯·æ±‚å‘ç»™caddyä¹‹åå†è®©caddyè½¬å‘åˆ°aultwardençš„dockerå®¹å™¨æ˜ å°„çš„80ç«¯å£é‚£é‡Œ. è¿™æ ·å®é™…è®¿é—®çš„æ—¶å€™ä¾ç„¶æ˜¯httpsåŠ å¯†è®¿é—®. ä¸ç”¨æ‹…å¿ƒå®‰å…¨é—®é¢˜</li>
</ol>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p>åœ¨æ­å»ºè¿™ç¯‡åšå®¢æ—¶å‚è€ƒäº†ä»¥ä¸‹é“¾æ¥, æ„Ÿè°¢å„ä½å¤§ä½¬çš„åˆ†äº«</p>
<h3 id="caddy-3"><code>caddy</code>:</h3>
<p><a class="link" href="https://mritd.com/2021/01/07/lets-start-using-caddy2"  target="_blank" rel="noopener"
    >Caddy2 ç®€æ˜æ•™ç¨‹</a></p>
<p><a class="link" href="https://blog.wangjunfeng.com/post/caddy-hugo/#%e6%b3%a8%e5%86%8ccaddy%e6%9c%8d%e5%8a%a1"  target="_blank" rel="noopener"
    >åˆ©ç”¨Caddyå®ç°Hugoä¸ªäººåšå®¢çš„è‡ªåŠ¨åŒ–éƒ¨ç½²</a></p>
<p><a class="link" href="https://github.com/LadderOperator/docker-caddy2-hugo-alidns"  target="_blank" rel="noopener"
    >vrongmeal/caddygit</a></p>
<p><a class="link" href="https://github.com/vrongmeal/caddygit"  target="_blank" rel="noopener"
    >WingLim/caddy-webhook</a></p>
<p><a class="link" href="https://github.com/WingLim/caddy-webhook"  target="_blank" rel="noopener"
    >WingLim/caddy-webhook</a></p>
<p><a class="link" href="https://github.com/LadderOperator/docker-caddy2-hugo-alidns"  target="_blank" rel="noopener"
    >LadderOperator/docker-caddy2-hugo-alidns</a></p>
<p><a class="link" href="https://caddy.community/t/caddy-reverse-proxy-nextcloud-collabora-vaultwarden-with-local-https/12052/2"  target="_blank" rel="noopener"
    >caddy community</a></p>
<h3 id="vaultwarden"><code>vaultwarden</code>:</h3>
<p><a class="link" href="https://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples"  target="_blank" rel="noopener"
    >dani-garcia/vaultwarden</a></p>
<h3 id="hugo-3"><code>hugo</code>:</h3>
<p><a class="link" href="https://www.andbible.com/post/hugo-command-usage"  target="_blank" rel="noopener"
    >hugo-command-usage</a></p>
<p><a class="link" href="https://www.jianshu.com/p/c5297a8bb1e7"  target="_blank" rel="noopener"
    >Hugo ç›®å½•ç»„ç»‡</a></p>
<p><a class="link" href="https://niceram.xyz/2021/03/04/20210304_1125"  target="_blank" rel="noopener"
    >Hugo é™æ€åšå®¢é£Ÿç”¨æŒ‡å—</a></p>
<p><a class="link" href="https://site.zhelper.net/Hugo/hugo-stack"  target="_blank" rel="noopener"
    >Stackä¸»é¢˜</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/caddy/">caddy</a>
        
            <a href="/tags/webhook/">webhook</a>
        
            <a href="/tags/hugo/">hugo</a>
        
            <a href="/tags/v2ray/">v2ray</a>
        
            <a href="/tags/bitwarden/">bitwarden</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="TioeAre/tioe-blog-comments"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2023 TioeAre
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
